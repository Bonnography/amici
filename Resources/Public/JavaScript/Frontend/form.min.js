class Recaptcha{currentForm=null;constructor(){this.initializeEvents(),this.registerCallback()}initializeEvents(){[...document.querySelectorAll("[data-recaptcha-form-submit]")].map(t=>{t.addEventListener("click",t=>this.visibleRecaptchaButtonClicked(t))}),[...document.querySelectorAll('[data-callback="onRecaptchaSubmit"]')].map(t=>{t.addEventListener("click",t=>this.invisibleRecaptchaButtonClicked(t))})}visibleRecaptchaButtonClicked(t){if(this.currentForm=t.target.closest("form"),this.currentForm.checkValidity())t.target.closest("form").submit();else{var e=this.currentForm.querySelectorAll(":invalid"),r=this.currentForm.querySelector(".hiddenRecaptcha").value,a;""===r&&this.currentForm.querySelector(".hiddenRecaptcha").closest(".recaptcha").classList.add("invalid"),console.log(r);for(a of e)a.closest(".input").classList.add("invalid");t.preventDefault(),t.stopPropagation()}this.currentForm.classList.add("was-validated")}invisibleRecaptchaButtonClicked(t){null===this.currentForm&&(this.currentForm=t.target.closest("form"))}registerCallback(){window.onRecaptchaSubmit=this.submitCurrentForm.bind(this),window.onRecaptchaCallback=this.recaptchaConfirmed.bind(this),window.onRecaptchaExpired=this.recaptchaExpired.bind(this),window.onRecaptchaError=this.recaptchaError.bind(this)}submitCurrentForm(t){this.currentForm.checkValidity()?(this.currentForm.querySelector("[data-recaptcha-form-field]").value=t,this.currentForm.submit()):(event.preventDefault(),event.stopPropagation(),this.currentForm.classList.add("was-validated")),this.currentForm=null}recaptchaConfirmed(t){document.querySelector("[data-recaptcha-form-field]").value=t;let e=document.querySelector(".recaptcha");e.classList.contains("invalid")&&e.classList.remove("invalid")}recaptchaExpired(){document.querySelector("[data-recaptcha-form-field]").value=""}recaptchaError(){document.querySelector("[data-recaptcha-form-field]").value=""}}new Recaptcha;